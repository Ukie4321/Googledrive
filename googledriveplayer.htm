<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MRZYB PLAYER</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&display=swap" rel="stylesheet">
<!-- Video.js -->
<link href="https://vjs.zencdn.net/8.10.0/video-js.css" rel="stylesheet" />
<script src="https://vjs.zencdn.net/8.10.0/video.min.js"></script>
<style>
  body { font-family: Arial, sans-serif; background: #111; color: #fff; text-align: center; margin:0; padding:20px;}
  .container { max-width: 800px; margin:auto; }

  h1 {
    font-family: 'Orbitron', sans-serif;
    font-size: 28px;
    color: white;
    text-shadow: 0 0 8px #00a2ff, 0 0 16px #7f00ff;
    animation: glow 2s infinite alternate;
    margin-bottom: 10px;
  }
  @keyframes glow {
    from { text-shadow: 0 0 8px #00a2ff, 0 0 16px #7f00ff; }
    to   { text-shadow: 0 0 15px #00f7ff, 0 0 30px #9a00ff; }
  }

  .logo img { width:120px; border-radius:15px; margin:10px 0; }

  .telegram-link a {
    color:#00a2ff; text-decoration:none; font-weight:bold;
  }
  .telegram-link a:hover { text-decoration:underline; }

  input, button { padding:10px; margin:5px; border-radius:5px; border:none; }
  input { width:70%; }
  button { background:#0a84ff; color:#fff; cursor:pointer; }
  button:hover { background:#0066cc; }

  .video-js.vjs-mrzyb {
    width:100%;
    max-height:500px;
    margin-top:20px;
    border-radius:15px;
    background:#000;
    border:3px solid #00a2ff;
    box-shadow:0 0 15px #00a2ff, 0 0 30px #00a2ff;
  }

  .output { margin-top:15px; }
</style>
</head>
<body>
<div class="container">

  <h1>MRZYB-PLAYER</h1>

  <div class="logo">
    <img src="https://api.pcloud.com/getpubthumb?code=XZ0uuD5ZzfDh2YV37h7eG7CCkCG8O5CRjG4k&linkpassword=&size=512x542&crop=0&type=auto" alt="MRZYB Logo">
  </div>

  <div class="telegram-link">
    <a href="https://t.me/mrzyb_movie" target="_blank">Join Telegram @mrzyb_movie</a>
  </div>

  <p>Tempel link video (GitHub MP4 / Google Drive):</p>
  <input type="text" id="videoLink" placeholder="Paste link di sini">
  <button onclick="generateVideo()">Tonton</button>

  <div class="output" id="result"></div>

  <video
    id="player"
    class="video-js vjs-big-play-centered vjs-mrzyb"
    controls
    preload="auto"
    playsinline
    data-setup='{}'
  ></video>
</div>

<script>
function extractDriveId(url) {
  try {
    const u = new URL(url);
    if (/drive\.google\.com$/.test(u.hostname)) {
      const m1 = u.pathname.match(/\/file\/d\/([a-zA-Z0-9_-]+)/);
      if (m1) return m1[1];
      const idParam = u.searchParams.get('id');
      if (idParam) return idParam;
      const m2 = u.pathname.match(/\/d\/([a-zA-Z0-9_-]+)/);
      if (m2) return m2[1];
    }
  } catch(e) {}
  return null;
}

function toDrivePreviewUrl(fileId) {
  return `https://drive.google.com/file/d/${fileId}/preview`;
}

function generateVideo(){
  const link = document.getElementById("videoLink").value.trim();
  if(!link) return;

  let finalSrc = link;
  const id = extractDriveId(link);
  if (id) finalSrc = toDrivePreviewUrl(id);

  const vjsPlayer = videojs('player');
  vjsPlayer.src({src: finalSrc, type: 'video/mp4'});
  vjsPlayer.ready(()=>{
    vjsPlayer.play().catch(()=>{});
  });

  const encoded = btoa(link);
  const shareUrl = window.location.origin + window.location.pathname + "?video=" + encoded;
  document.getElementById("result").innerHTML = `
    <p>Link share (siap copy):</p>
    <input type="text" value="${shareUrl}" readonly onclick="this.select()">
    ${id ? '<div style="font-size:13px;opacity:.8">Sumber: Google Drive (preview)</div>' : '<div style="font-size:13px;opacity:.8">Sumber: Direct MP4</div>'}
  `;
}

window.onload = function(){
  const params = new URLSearchParams(window.location.search);
  const encoded = params.get("video");
  if(encoded){
    try{
      const url = atob(encoded);
      document.getElementById("videoLink").value = url;
      let finalSrc = url;
      const id = extractDriveId(url);
      if (id) finalSrc = toDrivePreviewUrl(id);
      const vjsPlayer = videojs('player');
      vjsPlayer.src({src: finalSrc, type: 'video/mp4'});
      vjsPlayer.ready(()=>{
        vjsPlayer.play().catch(()=>{});
      });
    } catch(e){
      document.getElementById("result").innerHTML = "<p>Link video tidak valid!</p>";
    }
  }
};
</script>
</body>
</html>
